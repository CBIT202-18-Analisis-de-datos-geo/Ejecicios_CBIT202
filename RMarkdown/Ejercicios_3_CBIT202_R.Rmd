---
title: "Trabajo 3"
author: "Joseba"
date: "2024-09-11"
output: pdf_document
---

# Ejercicios N°3: Visualizaciones

## Introducción al Análisis Geoespacial CBIT202-24

La guía consta de **6** ejercicios de visualizaciones en R. Esta será entregada en formato PDF y deberá ser recreada en rmarkdwon, poniendo como nombre de alchivo "Ejer1_apellido_nombre.Rmd". Recuerde reemplazar todas las partes con '#???' y '???' con su código, y/o trabaje en la zona de 'desarrollo'.

Realice el desarrollo de estos ejercicios al interior del chunk correspondiente. Si necesita escribir hágalo ocupando #, esto es recomendable para aclarar el funcionamiento de su código. Puede utilizar herramientas de inteligencia artificial para investigar sobre el funcionamiento de funciones o paquetes, pero resuelva las preguntas basándose en su propio conocimiento e investigación. Recuerde que puede ocupar ? o F1 para saber más información sobre las funciones, paquetes instalados y datos contenidos en R base.

```{r Ejem, eval=FALSE, echo=TRUE}
# Por ejemplo:

# Funcion
?mean()
# Paquete
?stats()
# Datos
?iris()

```

Para acceder a los atajos del teclado puede presionar Alt + Shift + K (en Windows/Linux), Option + Shift + K (en macOS) o Help \> Keyboard Shortcuts Help. No olvide que puede retroceder en cualquier cambio que realice con Ctrl + Z.

## **Ejercicios (XXpts):**

***Indique su nombre:***

```{r nombre, eval=FALSE, echo=TRUE}
# Nombre alumno:

```

Los ejercicios de esta guía requieren del paquete “datos”, el cual contiene conjuntos de datos de distintos paquetes, incluyendo R base, traducidos al español. Y el paquete tidyverse. Por favor, corra el siguiente código para cargarlos antes de continuar con la guía:

```{r paquete, eval=FALSE, echo=TRUE}
library(datos)
library(tidyverse)
```

Puede apoyarse en los siguientes links para realizar los ejercicios de esta guía:

-   [R Graph Gallery](https://r-graph-gallery.com/)
-   [Beautiful Plotting](https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/)

**1)** En base al data frame "trees", genere un histograma del ancho de los arboles con 6 bins (intervalos) sin el uso de ggplot2 (vea la función "hist()" y sus argumentos), y otro histograma con ggplot2 ("geom_histogram()"). Escriba titulos en ambos ejes (con unidades de medida), un título general y un subtítulo. **(2pts)**

```{r Ejer1, eval=FALSE, echo=TRUE}
# Desarrollo:
trees %>% glimpse()

hist_sin_ggplot <- ???
print(hist_sin_ggplot)
  
hist_con_ggplot <- ???
print(hist_con_ggplot)
```

**2)** Realice las modificaciones solicitadas al siguiente gráfico en base a datos de pinguinos de la estación Palmer, en la Antártica Chilena. **(2pts)**

**Modificaciones:**

-   Agregue las geometrias geom_point y geom_smooth con las variables largo de aleta y la masa corporal, para los ejes X e Y respectivamente.
-   Agregue un título general y títulos de ejes adecuados.
-   Diferencie solo la geometria de puntos en forma y color según la especie de pinguino.
-   Modifique la transparencia para que los puntos sean ligeramente translúcidos (20%).
-   Modifique el titulo de la leyenda para que diga "Especies", y colóquela en la parte inferior del gráfico.
-   Ocupe la función scale_color_colorblind() de ggthemes para modificar los colores. En sus palabras ¿Qué hace esta función? ¿Cree que es importante? (la función no requiere de argumentos y se agrega al grafico con +)
-   Agregue algún tema que le paresca adecuado o agradable.

```{r Ejer2, eval=FALSE, echo=TRUE}
# Paquetes requeridos (instalelos antes de llamarlos)
library(palmerpenguins)
library(ggthemes)

# Desarrollo:
penguins %>% ggplot(aes(???)) +
  geom_???
  
```

**3)** En base a los datos de pinguinos ocupados en el ejercicio anterior realice los siguientes gráficos: **(2pts)**

-   P1: Un gráfico de barras (geom_bar()) para comparar la cantidad de pinguinos por especie.
-   P2: Un gráfico de caja y bigotes para saber la distribución de masa corporal por especie. Con distintos rellenos por especie.
-   P3: Un gráfico de densidad (geom_density()) con un relleno por especie y una transparencia de 50%.
-   P4: Un gráfico de barras (geom_bar()) que muestre la proporción entre especies para cada isla muestreada (revise los argumentos de geom_bar() y observe el efecto de position = "fill").

```{r Ejer3, eval=FALSE, echo=TRUE}
# Desarrollo:
# P1:


# P2:


# P3:


# P4:


```

**4)** Basado en el gráfico realizado en el ejercicio 2 (pero utilizando solo la geometría de puntos), separe el gráfico según la isla en la que fueron medidos los pingüinos y luego sepárelo simultáneamente por isla y especie (revise las funciones facet_wrap() y facet_grid()). Tenga en cuenta que "separar" en este caso se refiere a mostrar múltiples paneles en el gráfico. **(2pts)**

```{r Ejer4, eval=FALSE, echo=TRUE}
# Desarrollo:

# Separado por isla:


# Separado por isla y especie:


```

**5)** Ejecute el siguiente código para descargar los datos de uso de suelo para la provincia de Valdivia (catastro vegetacional de CONAF), sin geometria, en su wording directory. Junto con un archivo explicativo de las variables del catastro. **(4pts)**

Si este codigo le genera problemas a la hora de la descarga, puede ser debido al formato RMarkdown. Pegue el código en la consola para ejecutarlo.

```{r uso_suelo , eval=FALSE, echo=TRUE}
githubURL <- "https://raw.githubusercontent.com/CBIT202-18-Analisis-de-datos-geo/Ejercicios_CBIT202/main/archivos/uso_val.csv"

download.file(githubURL,"uso_val.csv")

uso_val <- read.csv("uso_val.csv")

githubURL2 <- "https://raw.githubusercontent.com/CBIT202-18-Analisis-de-datos-geo/Ejercicios_CBIT202/main/archivos/ESTRUCTURA_BBDD_CATASTROS-1-1-1.pdf"

download.file(githubURL2, "readme_uso_val.pdf", mode = "wb")
file.exists("readme_uso_val.pdf")
```

En base a este set de datos genere gráficos que puedan responder las siguientes preguntas. Recuerde, existen múltiples respuestas correctas, pero el camino más simple suele ser el mejor. También tome en cuenta que las variables que se encuentran como variables ID suelen tener menor errores que las que se encuentran como texto, puede ocupar tanto las variables de ID como las de texto.

Utilice cuando sea necesario las funciones: select(), filter(), arrange(), mutate(), group_by() y summarize(). Ademas de otras.

**Todos los graficos deben tener titulos adecuados y un theme.**

Pregunta 1: ¿Cuál es uso de suelo que presenta mayor cobertura en la provincia de valdivia? (Pista: una manera involucra group_by y summarize, junto a la función sum())

```{r ejer5 P1, eval=FALSE, echo=TRUE}
# Pregunta 1:


```

Pregunta 2: ¿Cómo es la distribución de los tamaños de parche por uso? (Pista: ocupe geom_boxplot con outliers = F)

```{r ejer5 P2, eval=FALSE, echo=TRUE}
# Pregunta 2:

```

Pregunta 3: ¿Cuál es la cobertura porcentual de cada subuso de bosque? (Pista: antes que nada hay que filtrar por uso de bosque)

```{r ejer5 P3, eval=FALSE, echo=TRUE}
# Pregunta 3:

```

Pregunta 4: ¿Para bosques, en qué combinación de cobertura y tipo forestal hay un mayor número de parches? (Pista: ocupe geom_count())

```{r ejer5 P4, eval=FALSE, echo=TRUE}
# Pregunta 4:

```

**6)** Recree el siguiente grafico: **(4pts)**

![](https://raw.githubusercontent.com/CBIT202-18-Analisis-de-datos-geo/Ejercicios_CBIT202/main/archivos/ejer3_p6.png)

*Con width puede modificar el ancho de geom_jitter y geom_boxplot*

```{r ejer6, eval=FALSE, echo=TRUE}
library(palmerpenguins)
penguins %>% glimpse()

  

```

**Bonus** Al gráfico anterior agrégale un punto con la media. Como se ve en la imagen:

![](https://raw.githubusercontent.com/CBIT202-18-Analisis-de-datos-geo/Ejercicios_CBIT202/main/archivos/ejer3_bonus.png)

```{r bonus, eval=FALSE, echo=TRUE}


```
